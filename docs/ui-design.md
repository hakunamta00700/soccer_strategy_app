# UI 설계 문서

## 전체 레이아웃 구조

### 메인 레이아웃

```
┌─────────────────────────────────────────────────────────────┐
│ Header (높이: 60px)                                         │
│ [로고] [세션명] ──────────── [저장 상태] [설정] [도움말]     │
├──────────┬──────────────────────────────────────────────────┤
│          │                                                  │
│ 사이드바  │                                                  │
│ (너비:    │            전술 보드 (Canvas)                    │
│  280px)   │                                                  │
│          │                                                  │
│          │                                                  │
│          │                                                  │
│          │                                                  │
├──────────┴──────────────────────────────────────────────────┤
│ 하단 패널 (높이: 200px)                                      │
│ [타임라인 / 속성 패널]                                       │
└─────────────────────────────────────────────────────────────┘
```

### 반응형 레이아웃

- **데스크톱 (≥1024px)**: 위 레이아웃 유지
- **태블릿 (768px~1023px)**: 사이드바 접을 수 있음
- **모바일 (<768px)**: 사이드바 오버레이 모달로 전환

## 컴포넌트 상세 설계

### 1. Header 컴포넌트

#### 구조
```
┌─────────────────────────────────────────────────────────┐
│ [로고] [세션명 ▼] [저장됨 ✓] [설정 ⚙] [도움말 ?]        │
└─────────────────────────────────────────────────────────┘
```

#### 요소
- **로고**: 클릭 시 홈(세션 목록)으로 이동
- **세션명**: 현재 세션 이름 표시, 클릭 시 세션 선택 드롭다운
- **저장 상태**: 
  - "저장됨 ✓" (녹색)
  - "저장 중..." (노란색)
  - "저장 안됨" (빨간색)
- **설정 버튼**: 설정 모달 열기
- **도움말 버튼**: 단축키 및 사용 가이드

#### 스타일
- 배경: `#1a1a1a` (다크 테마)
- 텍스트: `#ffffff`
- 높이: `60px`
- 패딩: `0 24px`

---

### 2. 사이드바 (Sidebar) 컴포넌트

#### 탭 구조
```
┌─────────────────┐
│ [선수] [도구] [전술] │
├─────────────────┤
│                 │
│  탭 컨텐츠       │
│                 │
│                 │
└─────────────────┘
```

#### 탭 1: 선수 (Players)
```
┌─────────────────────────┐
│ 선수 추가                │
│ ┌─────────────────────┐  │
│ │ [선수 아이콘]       │  │
│ │ 등번호: [  ]       │  │
│ │ 이름: [      ]     │  │
│ │ 포지션: [GK ▼]    │  │
│ │ 색상: [●] [추가]   │  │
│ └─────────────────────┘  │
│                         │
│ 배치된 선수 목록         │
│ ┌─────────────────────┐ │
│ │ ● #10 홍길동 (FW)   │ │
│ │ ● #7 김철수 (MF)    │ │
│ │ ...                 │ │
│ └─────────────────────┘ │
└─────────────────────────┘
```

#### 탭 2: 도구 (Tools)
```
┌─────────────────────────┐
│ 그리기 도구              │
│ ┌─────────────────────┐  │
│ │ [→] 화살표          │  │
│ │ [─] 직선            │  │
│ │ [~] 곡선            │  │
│ │ [□] 사각형          │  │
│ │ [○] 원              │  │
│ │ [T] 텍스트          │  │
│ └─────────────────────┘  │
│                         │
│ 포메이션 템플릿          │
│ ┌─────────────────────┐  │
│ │ [4-4-2] [4-3-3]     │  │
│ │ [3-5-2] [4-2-3-1]   │  │
│ └─────────────────────┘  │
│                         │
│ 보기 옵션                │
│ ┌─────────────────────┐  │
│ │ ☑ 격자 표시         │  │
│ │ ☑ 스냅              │  │
│ │ ☑ 경로 표시         │  │
│ └─────────────────────┘  │
└─────────────────────────┘
```

#### 탭 3: 전술 (Tactics)
```
┌─────────────────────────┐
│ 전술 목록               │
│ ┌─────────────────────┐  │
│ │ [새 전술]           │  │
│ ├─────────────────────┤  │
│ │ 📋 공격 전술        │  │
│ │ 📋 수비 전술        │  │
│ │ 📋 세트피스         │  │
│ └─────────────────────┘  │
└─────────────────────────┘
```

---

### 3. 전술 보드 (TacticalBoard) 컴포넌트

#### 구조
```
┌─────────────────────────────────────────────┐
│ [◀] [전체 보기] [100% ▼] [▶]                │
├─────────────────────────────────────────────┤
│                                             │
│         React-Konva Canvas                 │
│                                             │
│         (축구장 배경 + 객체들)              │
│                                             │
│                                             │
└─────────────────────────────────────────────┘
```

#### 레이어 구조 (React-Konva)
1. **BackgroundLayer**: 축구장 배경, 격자
2. **ShapeLayer**: 도형 (화살표, 선, 영역)
3. **PlayerLayer**: 선수 아이콘
4. **AnimationLayer**: 애니메이션 경로
5. **OverlayLayer**: 선택 하이라이트, 임시 그리기

#### 상호작용
- **드래그 앤 드롭**: 선수 배치 및 이동
- **클릭 선택**: 객체 선택
- **더블클릭**: 속성 편집
- **우클릭**: 컨텍스트 메뉴
- **마우스 휠**: 줌 인/아웃
- **스페이스 + 드래그**: 팬 (이동)

#### 축구장 배경
- 표준 축구장 크기 (105m × 68m)
- 중앙선, 페널티 박스, 골 에어리어, 반원 등 표시
- 색상: 녹색 필드, 흰색 라인

---

### 4. 하단 패널 (Bottom Panel) 컴포넌트

#### 모드 1: 타임라인 (애니메이션 모드)
```
┌─────────────────────────────────────────────────────────┐
│ [◀◀] [◀] [▶] [▶▶] [일시정지] [1.0x ▼] [반복]           │
├─────────────────────────────────────────────────────────┤
│ 0s ────●───────────●───────────●─────────── 30s        │
│       키프레임1    키프레임2    키프레임3                │
└─────────────────────────────────────────────────────────┘
```

#### 모드 2: 속성 패널 (편집 모드)
```
┌─────────────────────────────────────────────────────────┐
│ 선택된 객체: 선수 #10 홍길동                            │
├─────────────────────────────────────────────────────────┤
│ 등번호: [10]                                            │
│ 이름: [홍길동]                                          │
│ 포지션: [FW ▼]                                          │
│ 색상: [●] [색상 선택]                                   │
│                                                         │
│ [삭제] [복사]                                           │
└─────────────────────────────────────────────────────────┘
```

---

### 5. 세션 목록 (Session List) 화면

```
┌─────────────────────────────────────────────────────────┐
│ [새 세션] [검색...] [정렬: 최근순 ▼]                    │
├─────────────────────────────────────────────────────────┤
│ ┌──────────┐ ┌──────────┐ ┌──────────┐                │
│ │ [썸네일] │ │ [썸네일] │ │ [썸네일] │                │
│ │ 세션명   │ │ 세션명   │ │ 세션명   │                │
│ │ 2024-01-15│ │ 2024-01-14│ │ 2024-01-13│            │
│ └──────────┘ └──────────┘ └──────────┘                │
│                                                         │
│ ┌──────────┐ ┌──────────┐ ┌──────────┐                │
│ │ [썸네일] │ │ [썸네일] │ │ [썸네일] │                │
│ │ ...     │ │ ...     │ │ ...     │                │
│ └──────────┘ └──────────┘ └──────────┘                │
└─────────────────────────────────────────────────────────┘
```

---

## 상호작용 설계

### 1. 드래그 앤 드롭

#### 선수 배치
1. 사이드바에서 선수 아이콘을 드래그
2. 전술 보드 위로 이동 (마우스 커서 변경)
3. 드롭 위치에 선수 배치
4. 선수 속성 편집 다이얼로그 자동 표시

#### 선수 이동
1. 배치된 선수를 클릭하여 선택
2. 드래그하여 새 위치로 이동
3. 스냅이 켜져 있으면 격자에 자동 정렬

### 2. 객체 선택

#### 단일 선택
- 클릭: 객체 선택
- 선택된 객체는 하이라이트 표시 (파란색 테두리)
- 속성 패널에 선택된 객체 정보 표시

#### 다중 선택
- Shift + 클릭: 선택 추가
- 드래그로 영역 선택: 영역 내 모든 객체 선택
- Ctrl + A: 전체 선택

#### 선택 해제
- ESC 키
- 빈 공간 클릭
- 다른 객체 클릭

### 3. 키보드 단축키

| 단축키 | 기능 |
|--------|------|
| `Ctrl + S` | 저장 |
| `Ctrl + Z` | 실행 취소 |
| `Ctrl + Y` | 다시 실행 |
| `Delete` | 선택한 객체 삭제 |
| `Ctrl + C` | 복사 |
| `Ctrl + V` | 붙여넣기 |
| `Ctrl + A` | 전체 선택 |
| `ESC` | 선택 해제 |
| `Space + Drag` | 전술 보드 이동 |
| `Ctrl + Mouse Wheel` | 줌 인/아웃 |
| `F` | 전체 보기 |

### 4. 컨텍스트 메뉴

#### 선수 우클릭
```
┌─────────────────┐
│ 속성 편집        │
│ 복사            │
│ 삭제            │
│ ─────────────── │
│ 포지션 변경      │
└─────────────────┘
```

#### 도형 우클릭
```
┌─────────────────┐
│ 속성 편집        │
│ 복사            │
│ 삭제            │
│ ─────────────── │
│ 레이어 순서 변경 │
└─────────────────┘
```

#### 빈 공간 우클릭
```
┌─────────────────┐
│ 전체 보기        │
│ 격자 표시        │
│ ─────────────── │
│ 새 전술         │
└─────────────────┘
```

---

## 색상 테마

### 다크 테마 (기본)
- **배경**: `#1a1a1a`
- **카드/패널**: `#2d2d2d`
- **텍스트**: `#ffffff`
- **텍스트 보조**: `#b0b0b0`
- **강조**: `#3b82f6` (파란색)
- **성공**: `#10b981` (녹색)
- **경고**: `#f59e0b` (노란색)
- **에러**: `#ef4444` (빨간색)

### 라이트 테마 (향후)
- **배경**: `#ffffff`
- **카드/패널**: `#f5f5f5`
- **텍스트**: `#1a1a1a`
- **텍스트 보조**: `#666666`
- **강조**: `#2563eb`
- **성공**: `#059669`
- **경고**: `#d97706`
- **에러**: `#dc2626`

---

## 타이포그래피

### 폰트
- **기본**: `-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif`
- **코드/숫자**: `'SF Mono', 'Monaco', 'Consolas', monospace`

### 크기
- **H1**: `32px` (페이지 제목)
- **H2**: `24px` (섹션 제목)
- **H3**: `20px` (서브섹션)
- **Body**: `16px` (본문)
- **Small**: `14px` (보조 텍스트)
- **Caption**: `12px` (캡션)

---

## 애니메이션 및 전환

### 전환 효과
- **페이지 전환**: `300ms ease-in-out`
- **모달 열기/닫기**: `200ms ease-out`
- **패널 토글**: `250ms ease-in-out`

### 마이크로 인터랙션
- **버튼 호버**: `150ms ease`
- **버튼 클릭**: 약간의 스케일 다운 (`scale(0.95)`)
- **객체 선택**: 펄스 애니메이션
- **저장 상태 변경**: 페이드 인/아웃

---

## 반응형 디자인

### 데스크톱 (≥1024px)
- 사이드바 항상 표시
- 하단 패널 항상 표시
- 전체 레이아웃 유지

### 태블릿 (768px ~ 1023px)
- 사이드바 접기 버튼 추가
- 접힌 사이드바는 아이콘만 표시
- 하단 패널 높이 조절 가능

### 모바일 (<768px)
- 사이드바는 오버레이 모달
- 하단 패널은 드로어 형태
- 터치 제스처 지원
- 단일 컬럼 레이아웃

---

## 접근성 (Accessibility)

### 키보드 네비게이션
- 모든 기능을 키보드로 접근 가능
- Tab 순서 논리적 구성
- 포커스 표시 명확

### 스크린 리더 지원
- ARIA 레이블 적절히 사용
- 의미 있는 alt 텍스트
- 역할(role) 명시

### 색상 대비
- WCAG AA 기준 준수 (4.5:1 이상)
- 색상만으로 정보 전달하지 않음

---

## 컴포넌트 트리 구조

```
App
├── Header
│   ├── Logo
│   ├── SessionSelector
│   ├── SaveStatus
│   ├── SettingsButton
│   └── HelpButton
├── MainLayout
│   ├── Sidebar
│   │   ├── TabNavigation
│   │   ├── PlayersTab
│   │   │   ├── PlayerForm
│   │   │   └── PlayerList
│   │   ├── ToolsTab
│   │   │   ├── DrawingTools
│   │   │   ├── FormationTemplates
│   │   │   └── ViewOptions
│   │   └── TacticsTab
│   │       └── TacticList
│   ├── TacticalBoard
│   │   ├── Stage (React-Konva)
│   │   │   ├── BackgroundLayer
│   │   │   ├── ShapeLayer
│   │   │   ├── PlayerLayer
│   │   │   ├── AnimationLayer
│   │   │   └── OverlayLayer
│   │   └── BoardControls
│   └── BottomPanel
│       ├── TimelinePanel (애니메이션 모드)
│       └── PropertiesPanel (편집 모드)
└── Modals
    ├── SessionListModal
    ├── SettingsModal
    ├── HelpModal
    └── ContextMenu
```

---

## 상태 관리 UI 흐름

### 객체 선택 흐름
```
사용자 클릭
  ↓
객체 감지 (Konva hit detection)
  ↓
상태 업데이트 (selectedObjectId)
  ↓
UI 업데이트
  - 객체 하이라이트
  - 속성 패널 표시
  - 컨텍스트 메뉴 준비
```

### 드래그 앤 드롭 흐름
```
드래그 시작
  ↓
드래그 중 (mousemove)
  ↓
드롭 (mouseup)
  ↓
위치 계산 및 검증
  ↓
상태 업데이트
  ↓
리렌더링
```

### 애니메이션 재생 흐름
```
재생 버튼 클릭
  ↓
애니메이션 루프 시작
  ↓
프레임별 상태 업데이트
  ↓
Canvas 리렌더링
  ↓
타임라인 업데이트
```

---

## UI 컴포넌트 라이브러리 고려사항

### 추천 라이브러리
- **Radix UI**: 접근성 좋은 헤드리스 컴포넌트
- **Headless UI**: Tailwind CSS와 잘 맞음
- **React Aria**: 접근성 강화

### 커스텀 컴포넌트
- 전술 보드 관련 컴포넌트는 React-Konva 기반 커스텀
- 도구 팔레트는 커스텀 구현
- 타임라인은 커스텀 구현 (D3.js 또는 자체 구현)

---

## 성능 최적화 UI 전략

### 가상화 (Virtualization)
- 세션 목록이 많을 때 가상 스크롤 적용
- 전술 목록도 가상화 고려

### 지연 로딩 (Lazy Loading)
- 모달은 필요할 때만 렌더링
- 이미지는 lazy loading

### 메모이제이션
- React.memo로 불필요한 리렌더링 방지
- useMemo, useCallback 적절히 사용

### Canvas 최적화
- 레이어 분리로 리렌더링 최소화
- 변경된 객체만 업데이트
- requestAnimationFrame 활용
